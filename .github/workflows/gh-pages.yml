name github pages

on
  push
    branches
      - main  # Set a branch to deploy
  pull_request

jobs
  deploy
    runs-on ubuntu-20.04
    steps
      - uses actionscheckout@v2
        with
          submodules true  # Fetch Hugo themes (true OR recursive)
          fetch-depth 0    # Fetch all history for .GitInfo and .Lastmod
          lfs true

      - name Deploy
        uses peaceirisactions-gh-pages@v3
        if github.ref == 'refsheadsmain'
        with
          github_token ${{ secrets.GITHUB_TOKEN }}
          publish_dir .